<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Berties Book Shop – Search</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <header class="site-header">
    <h1>Berties Book Shop</h1>
    <p>Search for books by title</p>
  </header>

  <main>
    <form action="/books/search" method="post">
      <div>
        <label for="searchTerm">Book title keyword:</label>
        <input
          type="text"
          id="searchTerm"
          name="searchTerm"
          value="<%= (typeof searchTerm !== 'undefined') ? searchTerm : '' %>"
          required
        >
      </div>
      <div>
        <button type="submit">Search</button>
      </div>
    </form>

    <% if (typeof searchTerm !== 'undefined' && searchTerm.length > 0) { %>
      <h2>Search results for "<%= searchTerm %>"</h2>

      <% if (typeof searchResults !== 'undefined' && searchResults.length > 0) { %>
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Book title</th>
              <th>Price (£)</th>
            </tr>
          </thead>
          <tbody>
            <% searchResults.forEach(function (book) { %>
              <tr>
                <td><%= book.id %></td>
                <td><%= book.name %></td>
                <td><%= book.price %></td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      <% } else { %>
        <p>No books found matching that search term.</p>
      <% } %>
    <% } %>

    <p><a href="/">Back to home</a></p>
  </main>
</body>
</html>
