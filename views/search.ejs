<%- include('partials/header', { title:'Search', active:'search' }) %>
  <section class="card">
    <h1>Search</h1>
    <form method="GET" action="/search">
      <div>
        <label for="q">Title contains</label>
        <input id="q" name="q" type="text" value="<%= q || '' %>" />
      </div>
      <div class="actions">
        <button class="btn primary" type="submit">Search</button>
      </div>
    </form>

    <% if (typeof results !== 'undefined') { %>
      <h2 style="margin-top:10px">Results</h2>
      <% if (!results.length) { %>
        <div class="alert bad">No matches.</div>
      <% } else { %>
        <table class="table">
          <thead><tr><th>Title</th><th>Author</th><th>Price</th></tr></thead>
          <tbody>
            <% results.forEach(r => { %>
              <tr>
                <td><%= r.title %></td>
                <td><%= r.author %></td>
                <td>Â£<%= Number(r.price).toFixed(2) %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      <% } %>
    <% } %>
  </section>
<%- include('partials/footer') %>
